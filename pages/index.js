import Head from 'next/head';
import Image from 'next/image';
import Header from '../components/Header/Header';
import CardContainer from '../components/CardContainer/CardContainer';
import { useEffect } from 'react';
import { getVideos, getVideoInfo } from '../youtube/youtube';
import style from '../styles/Home.module.css';
import { fetchUserHasura } from '../Hasura/hasura';
export async function getServerSideProps(context) {
	const actionVideos = await getVideos('action movies');
	const travelVideos = await getVideos('travel videos');
	const productivityVideos = await getVideos('productivity videos');
	const popularVideos = await getVideos('popular videos in Myanmar');
	// console.log('action VIDEOS ---', actionVideos);
	return {
		props: {
			actionVideos: actionVideos || [],
			travelVideos: travelVideos || [],
			productivityVideos: productivityVideos || [],
			popularVideos: popularVideos || [],
		}, // will be passed to the page component as props
	};
}
export default function Home({
	actionVideos,
	travelVideos,
	productivityVideos,
	popularVideos,
}) {
	useEffect(() => {
		// const get = async () => {
		// 	const res = await fetch(
		// 		`https:youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=20&q=action movies&key=AIzaSyDn59b8t5I0KQcO1tdt-vXg_4epdG-qB4g`
		// 	);
		// 	const data = await res.json();
		// 	console.log('Youtube Data ', data.items);
		// };
		// get();
		const get = async () => {
			// const res = await getVideos('real madrid highlights');
			// console.log('CALLED FROM INDEX --- ', res);
			const res = await getVideoInfo('bLvqoHBptjg');
			console.log('RES FROM INDEXJS', res);
		};
		// get();
		// fetchUserHasura();
	}, []);

	// console.log('action', typeof actionVideos);
	// console.log('TRAVEL', typeof travelVideos);
	// console.log('PRODUCTIVITY', productivityVideos);
	return (
		<div className={style.home}>
			<Head>
				<title> NETFLIX CLONE</title>
				<meta name="description" content="Generated by create next app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>

			<Header />
			<CardContainer title="action" cardSize="large" data={actionVideos} />
			<CardContainer title="Travel" cardSize="medium" data={travelVideos} />
			<CardContainer
				title="Productivity"
				cardSize="small"
				data={productivityVideos}
			/>
			<CardContainer
				title="Popular Videos in MM"
				cardSize="medium"
				data={popularVideos}
			/>
		</div>
	);
}
